<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gra SŁOWO - Online</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 400px; margin: 20px auto; }
  h1 { text-align: center; }
  #board { margin-top: 20px; }
  .row { display: flex; justify-content: center; margin-bottom: 5px; }
  .cell {
    width: 40px; height: 40px; margin: 2px;
    border: 2px solid #999; font-size: 24px; font-weight: bold;
    text-align: center; line-height: 40px;
    text-transform: uppercase;
  }
  .correct { background-color: #4caf50; color: white; border-color: #4caf50; }
  .present { background-color: #ffeb3b; border-color: #fbc02d; }
  .absent { background-color: #ddd; border-color: #bbb; }
  input { font-size: 18px; padding: 8px; width: 200px; text-transform: uppercase; }
  button { padding: 8px 16px; font-size: 16px; margin-left: 10px; }
  #message { margin-top: 15px; font-weight: bold; text-align: center; }
</style>
</head>
<body>

<h1>Gra "SŁOWO"</h1>
<p>Odgadnij 5-literowe słowo. Masz 6 prób.</p>

<div id="board"></div>

<div style="text-align:center; margin-top:20px;">
  <input id="guessInput" maxlength="5" autocomplete="off" autofocus placeholder="Wpisz słowo" />
  <button id="guessBtn">Sprawdź</button>
</div>

<div id="message"></div>

<script>
  const ANSWER = 'SŁOWO';
  const MAX_GUESSES = 6;
  let guesses = 0;

  const board = document.getElementById('board');
  const guessInput = document.getElementById('guessInput');
  const guessBtn = document.getElementById('guessBtn');
  const message = document.getElementById('message');

  function createRow() {
    const row = document.createElement('div');
    row.className = 'row';
    for(let i=0; i<5; i++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      row.appendChild(cell);
    }
    board.appendChild(row);
    return row;
  }

  function colorCells(row, guess) {
    const answerArr = ANSWER.split('');
    const guessArr = guess.split('');
    const cellElems = row.children;

    // Najpierw oznacz poprawne (zielone)
    for(let i=0; i<5; i++) {
      if(guessArr[i] === answerArr[i]) {
        cellElems[i].classList.add('correct');
        answerArr[i] = null; // usuwamy tę literę, żeby nie oznaczać jej ponownie
        guessArr[i] = null;
      }
    }
    // Następnie oznacz żółte i szare
    for(let i=0; i<5; i++) {
      if(guessArr[i] !== null) {
        const index = answerArr.indexOf(guessArr[i]);
        if(index !== -1) {
          cellElems[i].classList.add('present');
          answerArr[index] = null;
        } else {
          cellElems[i].classList.add('absent');
        }
      }
    }
  }

  function addGuess(guess) {
    const row = createRow();
    const cellElems = row.children;
    for(let i=0; i<5; i++) {
      cellElems[i].textContent = guess[i];
    }
    colorCells(row, guess);
  }

  function showMessage(text, color='black') {
    message.textContent = text;
    message.style.color = color;
  }

  guessBtn.addEventListener('click', () => {
    const guess = guessInput.value.toUpperCase();
    if(guess.length !== 5) {
      showMessage('Wpisz dokładnie 5 liter!');
      return;
    }
    if(guesses >= MAX_GUESSES) {
      showMessage('Koniec prób. Spróbuj ponownie odświeżając stronę.', 'red');
      return;
    }

    addGuess(guess);
    guesses++;

    if(guess === ANSWER) {
      showMessage('Brawo! Odgadłeś słowo!', 'green');
      guessInput.disabled = true;
      guessBtn.disabled = true;
    } else if(guesses === MAX_GUESSES) {
      showMessage(`Koniec prób! Prawidłowe słowo to: ${ANSWER}`, 'red');
      guessInput.disabled = true;
      guessBtn.disabled = true;
    } else {
      showMessage(`Próba ${guesses} z ${MAX_GUESSES}`);
    }
    guessInput.value = '';
    guessInput.focus();
  });

  guessInput.addEventListener('keypress', (e) => {
    if(e.key === 'Enter') {
      guessBtn.click();
    }
  });

</script>

</body>
</html>